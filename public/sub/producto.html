<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<title>Dashboard</title>

	<!-- Bootstrap -->
	<link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<!-- <link rel="stylesheet" type="text/css" href="css/normalize.css"> -->
	<link rel="stylesheet" type="text/css" href="../css/ezpc.css">
	<link rel="stylesheet" type="text/css" href="../css/controles.css">
</head>
<body>
	<nav id="sidepanel">
		<div id="sidepanel-logo" class="horizontal">
			<!-- <div class="vertical"> -->
					<img src="../img/dark logo.png">
			<!-- </div> -->
		</div>
		<div id="sidepanel-username" class="horizontal">
			<div class="vertical">
				<p id="name"></p>
			</div>
		</div>
		<div id="sidepanel-info">
			<img src="../img/user-icon.png" class="pull-left">
			<div class="vertical">
				<p>Bonificaci贸n: $685.50</p>
				<p>Puntos: 68</p>
				<p>Puntos Restantes: 32</p>
			</div>
		</div>
		<div id="sidepanel-menu">
			<ul class="sidepanel-list">
				<li class="sidepanel-list-item">
					<a href="#Menu-Inicio" data-toggle="collapse">Inicio
						<span class="glyphicon glyphicon-chevron-down pull-right" aria-hidden="true"></span>
					</a>
				</li>
				<div class="collapse" id="Menu-Inicio">
					<li>Informaci贸n General</li>
					<li>Informaci贸n Personal</li>
				</div>
			</ul>
			<ul class="sidepanel-list">
				<li class="sidepanel-list-item">
					<a href="#Menu-Actividad" data-toggle="collapse">Mi Actividad
						<span class="glyphicon glyphicon-chevron-down pull-right" aria-hidden="true"></span>
					</a>
				</li>
				<div class="collapse" id="Menu-Actividad">
					<li>Compras Recientes</li>
					<li>Ultimos Socios Agregados</li>
				</div>
			</ul>
			<ul class="sidepanel-list">
				<li class="sidepanel-list-item">
					<a href="#Menu-Red" data-toggle="collapse">Mi Red
						<span class="glyphicon glyphicon-chevron-down pull-right" aria-hidden="true"></span>
					</a>
				</li>
				<div class="collapse" id="Menu-Red">
					<li>Ver Arbol</li>
					<li>Inscribir Socio</li>
				</div>
			</ul>
			<ul class="sidepanel-list">
				<li class="sidepanel-list-item">
					<a href="#Menu-Reportes" data-toggle="collapse">Reportes
						<span class="glyphicon glyphicon-chevron-down pull-right" aria-hidden="true"></span>
					</a>
				</li>
				<div class="collapse" id="Menu-Reportes">
					<li>Bonificaciones</li>
					<li>Puntos</li>
				</div>
			</ul>
		</div>
	</nav>

	<div id="maincontent">
		<div id="toppanel">
			<div class="col-md-11">
				<h2><span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span> Detalles de producto</h2>
			</div>
			<div class="col-md-1 horizontal">
				<img src="../img/user-icon-dark.png">
				<span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>	
			</div>
		</div>
		<div id="productoContent">
			<nav class="navbar navbar-default">
				<div class="navbar-header">
					<a class="navbar-brand" href="#">
						<img src="../img/light logo.png">
					</a>
				</div>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav">
						<li><a href="/dashboard.html">Inicio</a></li>
						<li><a>Hardware</a></li>
						<li><a>Accesorios</a></li>
						<li><a>Almacenamiento</a></li>
						<li><a>Software</a></li>
					</ul>
					<div class="navbar-right">
						<button type="submit" form="frmAgregar" value="Submit" class="highlight"><span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span> Ver carrito</button>
					</div>
				</div>
			</nav>
			<div class="container-fluid">
				<div class="row">					
					<div class="col-md-6">
						<div class="horizontal">
							<div class="vertical">
								<img class="img-responsive" id="productImage">
							</div>
						</div>
					</div>
					<div class="col-md-4 col-md-offset-1 producto-info">

						<p id="productName">Cargando</p>
						<p id="productDescription" class="descripcion">...</p>
						<p id="productPrice" class="precio">$0</p>
						<!-- <p><small id="productPoints">0</small><small> puntos</small></p> -->
						<form id="frmAgregar" class="form-active form-inline">
							<div class="form-group">
								<label for="txtCantidad" class="visible-inline">Cantidad </label>
								<input type="number" id="txtCantidad" name="txtCantidad" class="form-control white" value="1" min="1">
							</div>
						</form>
						<button type="submit" form="frmAgregar" value="Submit" class="highlight"><span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span> Agregar</button>
					</div>
				</div>
				<hr>
			</div>
		</div>
	</div>

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="../js/jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="../bootstrap/js/bootstrap.min.js"></script>
	<!-- <script type="text/javascript" src="../js/ezpc.js"></script> -->
	<script type="text/javascript">
	$(document).ready(function(){
		obtenerDatos();
	});
	function obtenerDatos()
	{
		$.ajax({
			type : 'GET',
			url : "/api/user"})
		.done(function(usuario){
			$("#name").text(usuario.name);
			$("#id").text(usuario.id);
		});
		$.ajax({
			type : 'GET',
			url : "/api/product/"+getParameterByName("product_id")})
		.done(function(producto){
			$("#productName").text(producto.name);
			$("#productDescription").text(producto.description);
			$("#productPrice").text("$"+producto.price);
			$("#productImage").attr("src", producto.image_path);
		});
	}
	//Util funci贸n para obtener los query string de la URL
	//http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript
	function getParameterByName(name, url) {
	    if (!url) url = window.location.href;
	    name = name.replace(/[\[\]]/g, "\\$&");
	    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
	        results = regex.exec(url);
	    if (!results) return null;
	    if (!results[2]) return '';
	    return decodeURIComponent(results[2].replace(/\+/g, " "));
	}
</script>
</body>
</html>
